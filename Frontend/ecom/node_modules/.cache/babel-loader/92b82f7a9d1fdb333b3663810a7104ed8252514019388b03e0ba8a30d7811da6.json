{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\eCom in SB and ReactJS\\\\frontend\\\\ecom\\\\src\\\\Pages\\\\LoginPage.js\";\nimport Login from \"../Components/Login\";\nimport { json, redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginPage() {\n  return /*#__PURE__*/_jsxDEV(Login, {\n    method: \"post\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 5,\n    columnNumber: 7\n  }, this);\n}\n_c = LoginPage;\nexport default LoginPage;\nexport async function action({\n  request\n}) {\n  const data = await request.formData();\n  const authdata = {\n    username: data.get('username'),\n    password: data.get('password')\n  };\n  const url = process.env.REACT_APP_BASEURL + \"token\";\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(authdata)\n  });\n  if (response.status === 422 || response.status === 401) {\n    return response;\n  }\n  if (!response.ok) {\n    return json({\n      message: 'Not a valid User'\n    }, {\n      status: 500\n    });\n  }\n  const resData = await response.json();\n  const token = resData.token;\n  console.log(\"resData.userInfo: \" + resData.user.role);\n  localStorage.setItem('token', token);\n  localStorage.setItem('userRole', resData.user.role);\n  localStorage.setItem('userId', resData.user.id);\n  localStorage.setItem('userData', JSON.stringify(resData.user));\n  return redirect('/');\n}\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["Login","json","redirect","jsxDEV","_jsxDEV","LoginPage","method","fileName","_jsxFileName","lineNumber","columnNumber","_c","action","request","data","formData","authdata","username","get","password","url","process","env","REACT_APP_BASEURL","response","fetch","headers","body","JSON","stringify","status","ok","message","resData","token","console","log","user","role","localStorage","setItem","id","$RefreshReg$"],"sources":["C:/Users/User/Desktop/eCom in SB and ReactJS/frontend/ecom/src/Pages/LoginPage.js"],"sourcesContent":["import Login from \"../Components/Login\";\r\nimport { json, redirect } from \"react-router-dom\";\r\nfunction LoginPage(){\r\n    return(\r\n      <Login method=\"post\"/>\r\n    )\r\n}\r\n\r\nexport default LoginPage;\r\n\r\nexport async function action({ request }) {\r\n\r\n \r\n  const data = await request.formData();\r\n  const authdata ={\r\n    username : data.get('username'),\r\n    password : data.get('password')\r\n  }\r\n\r\n  const url= process.env.REACT_APP_BASEURL+\"token\";\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(authdata)\r\n  })\r\n\r\n  if(response.status === 422 || response.status === 401){\r\n      return response;\r\n    }\r\n\r\n    if(!response.ok){\r\n      return json({message: 'Not a valid User'}, {status: 500})\r\n    }\r\n\r\n    const resData = await response.json();\r\n    const token = resData.token;\r\n    console.log(\"resData.userInfo: \"+resData.user.role)\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('userRole', resData.user.role)\r\n   localStorage.setItem('userId', resData.user.id)\r\n    localStorage.setItem('userData', JSON.stringify(resData.user) )\r\n   return  redirect('/')\r\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,qBAAqB;AACvC,SAASC,IAAI,EAAEC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAClD,SAASC,SAASA,CAAA,EAAE;EAChB,oBACED,OAAA,CAACJ,KAAK;IAACM,MAAM,EAAC;EAAM;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;AAE5B;AAACC,EAAA,GAJQN,SAAS;AAMlB,eAAeA,SAAS;AAExB,OAAO,eAAeO,MAAMA,CAAC;EAAEC;AAAQ,CAAC,EAAE;EAGxC,MAAMC,IAAI,GAAG,MAAMD,OAAO,CAACE,QAAQ,CAAC,CAAC;EACrC,MAAMC,QAAQ,GAAE;IACdC,QAAQ,EAAGH,IAAI,CAACI,GAAG,CAAC,UAAU,CAAC;IAC/BC,QAAQ,EAAGL,IAAI,CAACI,GAAG,CAAC,UAAU;EAChC,CAAC;EAED,MAAME,GAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,GAAC,OAAO;EAChD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;IAChCd,MAAM,EAAE,MAAM;IACdoB,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,QAAQ;EAC/B,CAAC,CAAC;EAEF,IAAGQ,QAAQ,CAACM,MAAM,KAAK,GAAG,IAAIN,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAC;IAClD,OAAON,QAAQ;EACjB;EAEA,IAAG,CAACA,QAAQ,CAACO,EAAE,EAAC;IACd,OAAO9B,IAAI,CAAC;MAAC+B,OAAO,EAAE;IAAkB,CAAC,EAAE;MAACF,MAAM,EAAE;IAAG,CAAC,CAAC;EAC3D;EAEA,MAAMG,OAAO,GAAG,MAAMT,QAAQ,CAACvB,IAAI,CAAC,CAAC;EACrC,MAAMiC,KAAK,GAAGD,OAAO,CAACC,KAAK;EAC3BC,OAAO,CAACC,GAAG,CAAC,oBAAoB,GAACH,OAAO,CAACI,IAAI,CAACC,IAAI,CAAC;EACnDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEN,KAAK,CAAC;EACpCK,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEP,OAAO,CAACI,IAAI,CAACC,IAAI,CAAC;EACpDC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEP,OAAO,CAACI,IAAI,CAACI,EAAE,CAAC;EAC9CF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEZ,IAAI,CAACC,SAAS,CAACI,OAAO,CAACI,IAAI,CAAE,CAAC;EAChE,OAAQnC,QAAQ,CAAC,GAAG,CAAC;AACxB;AAAC,IAAAS,EAAA;AAAA+B,YAAA,CAAA/B,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}